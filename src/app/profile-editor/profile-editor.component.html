<form [formGroup]="profileForm" (ngSubmit)="onSubmit()"
  class="needs-validation" novalidate style="margin-top: 15px;">

  <h5>Event Date/Venue</h5>

  <div class="form-group">
    <label for="date">Date</label>
    <div class="input-group">
      <input class="form-control" placeholder="yyyy-mm-dd"
        name="dp" formControlName="date" ngbDatepicker #d="ngbDatepicker">
      <div class="input-group-append">
        <button class="btn btn-outline-secondary calendar" (click)="d.toggle()"
          type="button"></button>
      </div>
    </div>
    <div *ngIf="profileForm.get('date').invalid &&
      (profileForm.get('date').dirty || profileForm.get('date').touched)"
      class="alert alert-danger">
      Please choose a Date.
    </div>
  </div>

  <div class="form-group">
    <label for="venue">Venue</label>
    <input formControlName="venue" type="text" class="form-control"
      id="venue" aria-describedby="venueHelp"
      required
      [ngbTypeahead]="searchVenue">
    <!-- <small id="venueHelp" class="form-text text-muted">Please enter the
      venue.</small> -->
    <div *ngIf="profileForm.get('venue').invalid &&
      (profileForm.get('venue').dirty || profileForm.get('venue').touched)"
      class="alert alert-danger">
      Please choose a Venue.
    </div>
  </div>

  <div>
    {{knownArtists.length}} Known Artists
  </div>

  <div formArrayName="artists" class="clearfix">
    <h5>Artists</h5>

    <div *ngFor="let artist of artists.controls; let i=index">
      <div class="form-group" [formGroupName]="i">
        <label for="artistName">Name</label>
        <input formControlName="name" type="text" class="form-control"
          id="artistName" aria-describedby="artistNameHelp"
          required
          [ngbTypeahead]="searchKnownArtists">
        <!-- placeholder="artistName" -->
        <!-- <small id="artistNameHelp" class="form-text text-muted">Please enter the
          artistName.</small> -->
        <div *ngIf="artist.get('name').invalid &&
          (artist.get('name').dirty || artist.get('name').touched)"
          class="alert alert-danger">
          Please choose an Artist Name.
        </div>
      </div>
    </div>

    <button class="btn btn-outline-dark float-right" type="button"
      (click)="addArtist()">Add
      Artist</button>
  </div>

  <div>

    <hr />

  </div>

  <!-- <p>
    Form Status: {{ profileForm.status }}
  </p> -->

  <!-- <div *ngIf="profileForm.invalid &&
    (profileForm.dirty || profileForm.touched)"
    class="alert alert-danger">
    Please enter the required values.
  </div> -->
  <div *ngIf="!profileForm.invalid" class="alert alert-success">
    The event details are valid!
  </div>

  <button type="submit" class="btn btn-primary float-right"
    style="margin-bottom: 15px;"
    (click)="submitShow()"
    [disabled]="!profileForm.valid">Submit</button>

  <br />
  <br />

  <a href="https://snerks.github.io/recommended-shows-ng01/">View All Shows</a>
  <div *ngIf="isUpdating">
    Updating...
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">
    {{errorMessage}}
  </div>

  <textarea *ngIf="!profileForm.invalid" style="width: 100%;" rows="15">{{
    profileForm.value | json }}</textarea>
</form>

<!-- <p>
  Value: {{ profileFormJson }}
</p> -->
<!-- 
  <p>
  Form Status: {{ profileForm.status }}
</p>

<pre>
  {{ profileForm.value | json }}
</pre> -->
